(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{"/VH1":function(t,e,n){"use strict";n.r(e);var r,c=n("Valr"),o=n("QJY3"),i=n("cUzu"),u=n("0AKQ"),a=n("F4EV"),s=n("Abgx"),p=n("F/XL"),b=n("15JJ"),f=n("67Y/"),l=n("9Z1F"),h=n("4pP6"),d=n("89WS"),y=n("V1Ee"),g=n("X/Iy"),O=n("TYT/"),k=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return k(e,t),e.prototype.getValue=function(){return this.token.id_token},e.NAME="nb:auth:azure:token",e}(h.c),v=function(t){function e(){var e,n,r=null!==t&&t.apply(this,arguments)||this;return r.redirectResultHandlers=((e={})[d.c.CODE]=function(){return Object(p.a)(r.route.snapshot.queryParams).pipe(Object(b.a)((function(t){return t.code?r.requestToken(t.code):Object(p.a)(new y.a(!1,t,r.getOption("redirect.failure"),r.getOption("defaultErrors"),[]))})))},e.id_token=function(){var t=r.getOption("authorize.requireValidToken");return Object(p.a)(r.route.snapshot.fragment).pipe(Object(f.a)((function(t){return r.parseHashAsQueryParams(t)})),Object(f.a)((function(e){return e.error?new y.a(!1,e,r.getOption("redirect.failure"),r.getOption("defaultErrors"),[]):new y.a(!0,e,r.getOption("redirect.success"),[],r.getOption("defaultMessages"),r.createToken(e,t))})),Object(l.a)((function(t){var e=[];return e.push(t instanceof h.a?t.message:"Something went wrong."),Object(p.a)(new y.a(!1,t,r.getOption("redirect.failure"),e))})))},e),r.redirectResults=((n={})[d.c.CODE]=function(){return Object(p.a)(null)},n.id_token=function(){return Object(p.a)(r.route.snapshot.fragment).pipe(Object(f.a)((function(t){return r.parseHashAsQueryParams(t)})),Object(f.a)((function(t){return!(!t||!t.id_token&&!t.error)})))},n),r}return k(e,t),e.setup=function(t){return[e,t]},e.\u0275prov=O.Qb({token:e,factory:e.\u0275fac=function(t){return w(t||e)}}),e}(g.a),w=O.cc(v),j=n("DUip"),z=n("ny24"),S=n("K9Ia"),_=n("BDhN"),P=n("vuB0"),Z=function(){function t(t,e){var n=this;this.authService=t,this.router=e,this.destroy$=new S.a,this.authService.authenticate("azure").pipe(Object(z.a)(this.destroy$)).subscribe((function(t){t.isSuccess()&&t.getRedirect()&&n.router.navigateByUrl(t.getRedirect())}))}return t.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},t.\u0275fac=function(e){return new(e||t)(O.Ub(_.a),O.Ub(j.c))},t.\u0275cmp=O.Ob({type:t,selectors:[["nb-playground-azure-callback"]],decls:3,vars:0,template:function(t,e){1&t&&(O.ac(0,"nb-layout"),O.ac(1,"nb-layout-column"),O.Pc(2,"Authenticating..."),O.Zb(),O.Zb())},directives:[P.b,P.a],encapsulation:2}),t}(),A=n("S+eJ");function $(t,e){if(1&t){var n=O.bc();O.ac(0,"button",2),O.mc("click",(function(){return O.Hc(n),O.qc().login()})),O.Pc(1,"Sign In with Azure"),O.Zb()}}function R(t,e){if(1&t){var n=O.bc();O.ac(0,"button",3),O.mc("click",(function(){return O.Hc(n),O.qc().logout()})),O.Pc(1,"Sign Out"),O.Zb()}}var U=[{path:"",component:function(){function t(t){var e=this;this.authService=t,this.destroy$=new S.a,this.authService.onTokenChange().pipe(Object(z.a)(this.destroy$)).subscribe((function(t){e.token=null,t&&t.isValid()&&(e.token=t)}))}return t.prototype.login=function(){this.authService.authenticate("azure").pipe(Object(z.a)(this.destroy$)).subscribe((function(t){}))},t.prototype.logout=function(){this.authService.logout("azure").pipe(Object(z.a)(this.destroy$)).subscribe((function(t){}))},t.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},t.\u0275fac=function(e){return new(e||t)(O.Ub(_.a))},t.\u0275cmp=O.Ob({type:t,selectors:[["nb-playground-azure"]],decls:11,vars:6,consts:[["nbButton","","status","success",3,"click",4,"ngIf"],["nbButton","","status","warning",3,"click",4,"ngIf"],["nbButton","","status","success",3,"click"],["nbButton","","status","warning",3,"click"]],template:function(t,e){1&t&&(O.ac(0,"nb-layout"),O.ac(1,"nb-layout-column"),O.ac(2,"nb-card"),O.ac(3,"nb-card-body"),O.ac(4,"p"),O.Pc(5),O.Zb(),O.ac(6,"p"),O.Pc(7),O.rc(8,"json"),O.Zb(),O.Nc(9,$,2,0,"button",0),O.Nc(10,R,2,0,"button",1),O.Zb(),O.Zb(),O.Zb(),O.Zb()),2&t&&(O.Gb(5),O.Rc("Current User Authenticated: ",!!e.token,""),O.Gb(2),O.Rc("Current User Token: ",O.sc(8,4,e.token),""),O.Gb(2),O.wc("ngIf",!e.token),O.Gb(1),O.wc("ngIf",e.token))},directives:[P.b,P.a,A.b,A.a,c.n],pipes:[c.h],encapsulation:2}),t}()},{path:"callback",component:Z}],I=function(){function t(){}return t.\u0275mod=O.Sb({type:t}),t.\u0275inj=O.Rb({factory:function(e){return new(e||t)},imports:[[j.g.forChild(U)],j.g]}),t}();n.d(e,"AzurePlaygroundModule",(function(){return T}));var T=function(){function t(){}return t.\u0275mod=O.Sb({type:t}),t.\u0275inj=O.Rb({factory:function(e){return new(e||t)},providers:[v],imports:[[c.c,o.g,i.c,s.a.forRoot({strategies:[v.setup({name:"azure",clientId:"bde728e2-2809-4ff1-bc9c-7fcb23800ebe",clientSecret:"",authorize:{endpoint:"https://login.microsoftonline.com/01513fd2-16a0-453b-9fa0-c9089bfa023e/oauth2/authorize",responseType:"id_token",scope:"openid",redirectUri:"https://akveo.github.io/nebular/example/azure/callback",params:{p:"b2c_1_nebular"}},token:{class:m},redirect:{success:"/example/azure"}})]}),u.a,a.a,I]]}),t}()}}]);