sudo: false
language: node_js
node_js:
  - '8'

addons:
  chrome: stable

env:
  global:
    - SAUCE_USERNAME=nixa
    - SAUCE_ACCESS_KEY=a922753805a4-7538-6644-c450-48fdf18c
    - BROWSER_PROVIDER_READY_FILE=/tmp/sauce-connect-ready
    - LOGS_DIR=/tmp/logs

branches:
  only:
  - master

git:
  depth: 1

install:
  - npm install

before_script:
  - mkdir -p $LOGS_DIR
  - ./scripts/ci/sauce/start-tunnel.sh

script:
  - ./scripts/ci/sauce/wait-tunnel.sh
#  - npm run release:validate
  - npm run test

after_script:
  - ./scripts/ci/sauce/stop-tunnel.sh
